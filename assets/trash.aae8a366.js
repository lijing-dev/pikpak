import{d as F,r,l as E,a as D,o as k,q as y,E as u,b as t,e as s,a8 as T,w as a,ac as x,G as g,C as S,aa as z,H as b,ai as B,O as A,x as m,T as i,F as L,a3 as P,A as N,a4 as M,a9 as V}from"./vendor.1a6f765c.js";import{i as p,b as q}from"./index.c0377817.js";const I={class:"list-page"},U={class:"header"},$={class:"title n-ellipsis"},j=m("\u56DE\u6536\u7AD9"),G={key:0,class:"outer-wrapper static show"},H={class:"toolbar-wrapper"},O=m(" \u8FD8\u539F\u6240\u9009 "),R=m(" \u5220\u9664\u6240\u9009 "),Y=F({setup(K){const _=r(),o=r([]),C=r([{title:"\u5220\u9664\u65F6\u95F4",key:"modified_time",sorter:"default",render:e=>i(L,{time:new Date(String(e.delete_time)||""),format:"MM-dd hh:mm"}),className:"modified_time",width:200},{title:"\u5927\u5C0F",key:"size",sorter:"default",render:e=>Number(e.size)>0?q(Number(e.size)):"",className:"size",width:160}]),f=r([{type:"selection"},{title:"\u540D\u79F0",key:"name",sorter:"default",render:e=>i("div",{class:"file-info"},[i("img",{src:e.thumbnail_link||e.icon_link}),i(P,{class:"title"},{default:()=>String(e.name)}),i("span",{class:"action"},"1")])},{title:"\u64CD\u4F5C",key:"action",width:90,align:"right",render:e=>i(V,{},{default:()=>[i(N,{type:"primary",onClick:()=>{v(String(e.id))}},{default:()=>"\u8FD8\u539F"}),i(M,{placement:"right",onPositiveClick:()=>{h(String(e.id))}},{trigger:()=>i(N,{type:"primary"},{default:()=>"\u5220\u9664"}),default:()=>"\u786E\u5B9A\u5220\u9664\u6587\u4EF6\u5417\uFF1F"})]})}]),d=r(!1),c=()=>{d.value=!0,p.get("https://api-drive.mypikpak.com/drive/v1/files",{params:{parent_id:"*",thumbnail_size:"SIZE_LARGE",with_audit:!0,filters:{phase:{eq:"PHASE_TYPE_COMPLETE"},trashed:{eq:!0}}}}).then(e=>{const{data:l}=e;_.value=l.files}).finally(()=>{d.value=!1})},h=e=>{p.post("https://api-drive.mypikpak.com/drive/v1/files:batchDelete",{ids:typeof e=="string"?[e]:e}).then(()=>{window.$message.success("\u5220\u9664\u6210\u529F"),c()})},v=e=>{p.post("https://api-drive.mypikpak.com/drive/v1/files:batchUntrash",{ids:typeof e=="string"?[e]:e}).then(()=>{c()})};return E(()=>{document.body.clientWidth>968&&f.value.splice(2,0,...C.value),c()}),(e,l)=>{const w=D("router-link");return k(),y("div",I,[u("div",U,[u("div",$,[t(s(T),{separator:">"},{default:a(()=>[t(s(z),null,{default:a(()=>[t(w,{to:""},{default:a(()=>[j]),_:1})]),_:1})]),_:1})])]),t(s(x),{"checked-row-keys":o.value,"onUpdate:checked-row-keys":l[0]||(l[0]=n=>o.value=n),"row-key":n=>n.id,data:_.value,size:"small",columns:f.value,bordered:!1,loading:d.value},null,8,["checked-row-keys","row-key","data","columns","loading"]),o.value.length?(k(),y("div",G,[u("div",H,[u("div",{class:"toolbar-item",onClick:l[1]||(l[1]=n=>v(o.value))},[t(s(g),null,{trigger:a(()=>[t(s(b),null,{default:a(()=>[t(s(B))]),_:1})]),default:a(()=>[O]),_:1})]),u("div",{class:"toolbar-item",onClick:l[2]||(l[2]=n=>h(o.value))},[t(s(g),null,{trigger:a(()=>[t(s(b),null,{default:a(()=>[t(s(A))]),_:1})]),default:a(()=>[R]),_:1})])])])):S("",!0)])}}});export{Y as default};
